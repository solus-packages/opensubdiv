name       : opensubdiv
version    : 3.4.3
release    : 4
source     :
    - https://github.com/PixarAnimationStudios/OpenSubdiv/archive/v3_4_3.tar.gz : 7b22eb27d636ab0c1e03722c7a5a5bd4f11664ee65c9b48f341a6d0ce7f36745
license    : Apache-2.0
homepage   : https://graphics.pixar.com/opensubdiv/
component  : multimedia.library
summary    : An Open-Source subdivision surface library
description: |
    OpenSubdiv is a set of open source libraries that implement high performance subdivision surface (subdiv) evaluation on massively parallel CPU and GPU architectures.

    This codepath is optimized for drawing deforming subdivs with static topology at interactive framerates. The resulting limit surface matches Pixar's Renderman to numerical precision.
builddeps  :
    - pkgconfig(glew)
    - pkgconfig(glfw3)
    - pkgconfig(libglvnd)
    - intel-tbb-devel
setup      : |
    %cmake_ninja \
      -DNO_EXAMPLES=ON \
      -DNO_TUTORIALS=ON \
      -DNO_PTEX=ON \
      -DNO_DOC=ON \
      -DNO_CUDA=ON \
      -DNO_OPENCL=ON \
      -DNO_METAL=ON \
      -DNO_OPENGL=OFF \
      -DNO_GLEW=OFF \
      -DOpenGL_GL_PREFERENCE:STRING="GLVND"
build      : |
    %ninja_build
install    : |
    %ninja_install
    rename stringify osd_stringify $installdir/usr/bin/stringify
    rm -v $installdir/usr/lib/*.a
